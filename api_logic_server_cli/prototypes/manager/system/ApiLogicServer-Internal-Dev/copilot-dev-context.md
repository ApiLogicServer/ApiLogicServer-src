# Context Restoration: BLT Manager Workspace

**Purpose:** This file re-establishes AI assistant context after BLT runs regenerate this workspace.

&nbsp;

## üéØ YOU ARE HERE: BLT Manager (Nested Workspace)

**Current Location:** `~/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/`

This is the **BLT Manager** - a nested workspace that gets regenerated by the Build-Load-Test process.

**Directory Structure:**
```
~/dev/ApiLogicServer/ApiLogicServer-dev/          # Seminal Manager (stable)
‚îú‚îÄ‚îÄ build_and_test/
‚îÇ   ‚îî‚îÄ‚îÄ ApiLogicServer/                           # ‚Üê YOU ARE HERE (BLT Manager)
‚îÇ       ‚îú‚îÄ‚îÄ samples/                              # Sample/test projects
‚îÇ       ‚îú‚îÄ‚îÄ venv/                                 # Shared venv for test projects
‚îÇ       ‚îú‚îÄ‚îÄ .github/.copilot-profile.md           # This file
‚îÇ       ‚îî‚îÄ‚îÄ docs/training/                        # Training materials
‚îî‚îÄ‚îÄ org_git/
    ‚îú‚îÄ‚îÄ ApiLogicServer-src/                       # Framework source (edit here)
    ‚îî‚îÄ‚îÄ Docs/                                     # Documentation project
```

**Key Facts:**
- This workspace is **regenerated** with each BLT run
- Sample projects live here for testing
- Has its own venv shared by test projects
- Framework changes happen in `org_git/ApiLogicServer-src/`

&nbsp;

## üìö Complete Architecture Documentation

**For comprehensive technical context, read:**

### [Architecture-Internals.md](https://apilogicserver.github.io/Docs/Architecture-Internals/)

This document contains **everything** you need to understand the system:

1. **Technology Lineage** - 40+ years of proven history:
   - Wang Labs PACE (6,000+ customers, 1980s-1990s)
   - Versata ($3.4B startup, Fortune 500 deployments, 1990s-2010s)
   - API Logic Server (modern cloud-native evolution, 2020s-present)

2. **Declarative Architecture** - The NL ‚Üí DSL ‚Üí Engines pattern:
   - Why rules are mandatory (correctness guarantee)
   - Dependency chains and automatic completeness
   - Database, API, UI, Logic engines

3. **Nested Manager Architecture** - Critical development structure:
   - Seminal Manager vs. BLT Manager (nested)
   - Development workflow: edit ‚Üí BLT ‚Üí test
   - Why this architecture exists

4. **Installation & Development Procedures** - How to work with the system:
   - Manager installation (`install-ApiLogicServer-dev.sh`)
   - Running BLT (Build-Load-Test)
   - Critical smoke test procedures
   - Ongoing development workflows

5. **Cross-References** - Complete navigation map to all documentation

**üëâ START HERE when establishing context in a new session.**

&nbsp;

## üß≠ Documentation Navigation Map

### For AI Assistants Working on Framework Internals:
- **[Architecture-Internals.md](https://apilogicserver.github.io/Docs/Architecture-Internals/)** - Complete technical architecture (read this first)
- **[Medium Article](https://medium.com/@valjhuber/declarative-genai-the-architecture-behind-enterprise-vibe-automation-1b8a4fe4fbd7)** - Architectural rationale and NL‚ÜíDSL‚ÜíEngines pattern

### For Creating New Projects:
- **Manager-level `.copilot-instructions.md`** - How to CREATE projects (in workspace root)
  - **Location:** `prototypes/manager/.github/.copilot-instructions.md`
  - **Size:** ~86 lines
  - **Scope:** Creating projects ONLY (3 methods: existing DB, GenAI, new DB)
  - **Purpose:** Instructions for creating new projects with `genai-logic create` commands
  - **Does NOT contain:** Project customization, logic patterns, testing, security, etc.

### For Working Within Created Projects:
- **Project-level `.copilot-instructions.md`** - How to EXTEND/CUSTOMIZE projects (auto-generated in each project)
  - **Location:** `prototypes/base/.github/.copilot-instructions.md` (template)
  - **Size:** ~740 lines
  - **Scope:** Complete architecture guide for EACH created project
  - **Purpose:** 13 Main Services (what AI can do in a project):
    1. **Run Project** - F5 debug, `api_logic_server_run.py`
    2. **Adding Business Logic** - Translate NL ‚Üí LogicBank rules (sums, formulas, constraints, events)
    3. **Discovery Systems** - Auto-load logic from `logic/logic_discovery/*.py`, APIs from `api/api_discovery/*.py`
    4. **Automated Testing** - Behave tests with BLT reports (requirements traceability)
    5. **Adding MCP** - Enable MCP client UI with `genai-logic genai-add-mcp-client`
    6. **Configuring Admin UI** - Edit `ui/admin/admin.yaml` for customization
    7. **Create React Apps** - `genai-logic genai-add-app` for custom UIs
    8. **Security - RBAC** - `als add-auth` for SQL/Keycloak, `security/declare_security.py` for grants
    9. **Custom API Endpoints** - Add routes in `api/customize_api.py`
    10. **B2B Integration APIs** - Complex endpoints with Row Dict Mappers for partner integration
    11. **Customize Models** - Add tables, attributes, derived fields
    12. **Adding Events** - Row events for integrations (Kafka, webhooks, etc.)
    13. **Critical Patterns** - React component best practices, null-safe constraints, test repeatability
  - ‚ö†Ô∏è **CRITICAL:** These are TWO DIFFERENT FILES - never replace the per-project version with the manager version!
  - üö® **PROPAGATION PROBLEM:** Changes to project-level instructions must be carefully copied to `prototypes/base/.github/.copilot-instructions.md`
- **`docs/training/logic_bank_api.prompt`** - LogicBank API reference (Rosetta Stone for rules)
- **`docs/training/testing.md`** - Behave testing guide (1755 lines, read BEFORE creating tests)

### For End Users:
- **[API Logic Server Documentation](https://apilogicserver.github.io/Docs/Doc-Home/)** - Complete user guide
- **[Installation Guide](https://apilogicserver.github.io/Docs/Install/)** - Setup procedures
- **[Tutorial](https://apilogicserver.github.io/Docs/Tutorial/)** - Step-by-step learning

&nbsp;

## üë§ Current Maintainer

**Val Huber**
- **Wang Labs PACE**: Designed and led the business rules architecture, co-invented (in parallel with Ron Ross) the declarative rules paradigm and execution engine
- **Versata**: CTO, designed and lead scaling the rules technology to J2EE and the web
- **API Logic Server**: Architect and lead developer, modernizing proven patterns for cloud-native Python/React stack, the use of GenAI, and current IDEs/deployment practices.

**Expertise:** 40+ years leading business rules technology evolution - inventor of declarative multi-table derivations, constraint propagation, and rule execution engines.

&nbsp;

## ü§ñ AI Assistant Quick Reference

### Two Working Modes:
- **Author-Val** (Developer/Maintainer) - Working on framework internals, debugging, testing
- **User-Val** (Simulating End Users) - Testing product workflows, creating demos, validating UX

### Context Establishment Protocol:
1. **Read [Architecture-Internals.md](https://apilogicserver.github.io/Docs/Architecture-Internals/)** for complete technical context
2. Identify which documentation to consult based on task:
   - Framework development ‚Üí Architecture-Internals.md
   - Project creation ‚Üí Manager-level `.copilot-instructions.md` (86 lines, in prototypes/manager/)
   - Project customization ‚Üí Project-level `.copilot-instructions.md` (740 lines, in prototypes/base/)
   - Adding logic ‚Üí `docs/training/logic_bank_api.prompt`
   - Creating tests ‚Üí `docs/training/testing.md`
3. **CRITICAL:** Never confuse the two `.copilot-instructions.md` files:
   - Manager version = how to CREATE projects (small, workspace-level)
   - Project version = how to CUSTOMIZE projects (large, per-project with architecture details)
4. When role unclear, ask: "Are you testing as a user or working on internals?"

### Key Principles:
- **Assume deep technical expertise** - Technology refined over 40+ years
- **Focus on efficient execution** - Less explanation, more action
- **Respect the architecture** - Patterns represent battle-tested solutions from thousands of deployments
- **Check training materials** - `logic_bank_api.prompt` and `testing.md` prevent common AI mistakes

### Communication Tone Guidelines:
- **Confident but NEVER hyperbolic** - Make only claims backed by specific, measurable evidence
- **Cite concrete metrics** - "200 lines ‚Üí 5 rules (40X)" not "transforms years into days"
- **Reference historical facts** - "40+ years, 6,000+ deployments" establishes credibility
- **Avoid unfounded superlatives** - No "revolutionary", "game-changing", or time-compression claims without data
- **Be specific** - "Creates working API in 5 seconds" vs "drastically reduces development time"
- **NEVER claim** - Time compression like "30-40 years ‚Üí 3-4 days" - these are unmeasurable and unfounded
- **DO claim** - Specific productivity gains with evidence: "40X code reduction", "instant API from database"

&nbsp;

## üîÑ Development Workflow

**Source Repository:** https://github.com/ApiLogicServer/ApiLogicServer-src

**Local Dev Path:** `/Users/val/dev/ApiLogicServer/ApiLogicServer-dev/org_git/ApiLogicServer-src`

**Workflow:**
1. Edit framework code in `org_git/ApiLogicServer-src/`
2. Run BLT from Seminal Manager (rebuilds, tests, regenerates this workspace)
3. Test with sample projects in this workspace
4. Sync templates back to `ApiLogicServer-src`
5. Push to GitHub

**BLT (Build-Load-Test):**
- Rebuilds API Logic Server from dev source
- Creates ~18 test projects with validation
- Critical smoke test before pushing to GitHub
- Results in `tests/results.txt` and `tests/failures.txt`

&nbsp;

---

**üìñ Remember:** This file provides orientation. For comprehensive technical understanding, read **[Architecture-Internals.md](https://apilogicserver.github.io/Docs/Architecture-Internals/)** - it's written for both AI assistants and human collaborators.
