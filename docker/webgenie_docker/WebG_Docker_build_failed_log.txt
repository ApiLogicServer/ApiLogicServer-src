venv) val@Vals-MPB-14 ApiLogicServer-src % sh docker/webgenie_docker/build_web_genie_local.sh local


Build Web/GenAI Docker locally (no push to docker hub)
 
pwd: /Users/val/dev/ApiLogicServer/ApiLogicServer-dev/org_git/ApiLogicServer-src

To build api_logic_server_local image:
.. 1. BLT (with tomato), or
.. 2. See 'Internal' at docker/api_logic_server.Dockerfile
Verify pwd = ApiLogicServer-src, local image ready (see above)> 
 
pwd: /Users/val/dev/ApiLogicServer/ApiLogicServer-dev/org_git
 

Clean webgen_ai_docker

+ rm -rf webgen_ai_docker
+ cp -r /Users/val/dev/ApiLogicServer/ApiLogicServer-dev/org_git/ApiLogicServer-src/docker/webgenie_docker/webgen_ai_docker ./
+ cd webgen_ai_docker
+ touch webgenai_env
+ git clone https://github.com/ApiLogicServer/sra --depth=1
Cloning into 'sra'...
remote: Enumerating objects: 637, done.
remote: Counting objects: 100% (637/637), done.
remote: Compressing objects: 100% (527/527), done.
remote: Total 637 (delta 107), reused 444 (delta 71), pack-reused 0 (from 0)
Receiving objects: 100% (637/637), 23.71 MiB | 31.83 MiB/s, done.
Resolving deltas: 100% (107/107), done.
+ git clone https://github.com/ApiLogicServer/webgenai
Cloning into 'webgenai'...
remote: Enumerating objects: 2738, done.
remote: Counting objects: 100% (251/251), done.
remote: Compressing objects: 100% (158/158), done.
remote: Total 2738 (delta 172), reused 155 (delta 81), pack-reused 2487 (from 1)
Receiving objects: 100% (2738/2738), 8.35 MiB | 7.49 MiB/s, done.
Resolving deltas: 100% (1599/1599), done.
+ cd webgenai
+ git pull
Already up to date.
+ cd ..
+ '[' local = local ']'
+ docker build -f /Users/val/dev/ApiLogicServer/ApiLogicServer-dev/org_git/ApiLogicServer-src/docker/webgenie_docker/webgen_ai_docker/webgenie_local.Dockerfile -t apilogicserver/web_genai --no-cache --rm .
[+] Building 12.8s (9/23)                                                             docker:desktop-linux
 => [internal] load build definition from webgenie_local.Dockerfile                                   0.0s
 => => transferring dockerfile: 1.74kB                                                                0.0s
 => [internal] load metadata for docker.io/apilogicserver/api_logic_server_local:latest               0.0s
 => [internal] load .dockerignore                                                                     0.0s
 => => transferring context: 2B                                                                       0.0s
 => [ 1/19] FROM docker.io/apilogicserver/api_logic_server_local:latest                               0.2s
 => [internal] load build context                                                                     0.4s
 => => transferring context: 65.28MB                                                                  0.4s
 => [ 2/19] RUN apt-get update                                                                        1.9s
 => [ 3/19] RUN apt-get install -y nginx jq sqlite3                                                   3.6s
 => [ 4/19] RUN curl -fsSL https://deb.nodesource.com/setup_20.x | bash - &&     apt-get install -y   6.7s
 => ERROR [ 5/19] RUN apt-get update && apt-get install wget -y     && mkdir -p -m 755 /etc/apt/keyr  0.4s
------
 > [ 5/19] RUN apt-get update && apt-get install wget -y     && mkdir -p -m 755 /etc/apt/keyrings     && wget -qO- https://cli.github.com/packages/githubcli-archive-keyring.gpg | tee /etc/apt/keyrings/githubcli-archive-keyring.gpg > /dev/null     && chmod go+r /etc/apt/keyrings/githubcli-archive-keyring.gpg     && echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main" | tee /etc/apt/sources.list.d/github-cli.list > /dev/null     && apt update     && apt install gh -y:
0.221 Get:1 http://deb.debian.org/debian bullseye InRelease [116 kB]
0.266 Get:2 http://deb.debian.org/debian-security bullseye-security InRelease [27.2 kB]
0.277 Err:1 http://deb.debian.org/debian bullseye InRelease
0.277   At least one invalid signature was encountered.
0.294 Get:3 https://packages.microsoft.com/debian/11/prod bullseye InRelease [3650 B]
0.302 Err:2 http://deb.debian.org/debian-security bullseye-security InRelease
0.302   At least one invalid signature was encountered.
0.303 Get:4 https://deb.nodesource.com/node_20.x nodistro InRelease [12.1 kB]
0.314 Get:5 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]
0.326 Err:3 https://packages.microsoft.com/debian/11/prod bullseye InRelease
0.326   At least one invalid signature was encountered.
0.344 Err:4 https://deb.nodesource.com/node_20.x nodistro InRelease
0.344   At least one invalid signature was encountered.
0.366 Err:5 http://deb.debian.org/debian bullseye-updates InRelease
0.366   At least one invalid signature was encountered.
0.369 Reading package lists...
0.377 W: GPG error: http://deb.debian.org/debian bullseye InRelease: At least one invalid signature was encountered.
0.377 E: The repository 'http://deb.debian.org/debian bullseye InRelease' is not signed.
0.377 W: GPG error: http://deb.debian.org/debian-security bullseye-security InRelease: At least one invalid signature was encountered.
0.377 E: The repository 'http://deb.debian.org/debian-security bullseye-security InRelease' is not signed.
0.377 W: GPG error: https://packages.microsoft.com/debian/11/prod bullseye InRelease: At least one invalid signature was encountered.
0.377 E: The repository 'https://packages.microsoft.com/debian/11/prod bullseye InRelease' is not signed.
0.377 W: GPG error: https://deb.nodesource.com/node_20.x nodistro InRelease: At least one invalid signature was encountered.
0.377 E: The repository 'https://deb.nodesource.com/node_20.x nodistro InRelease' is not signed.
0.377 W: GPG error: http://deb.debian.org/debian bullseye-updates InRelease: At least one invalid signature was encountered.
0.377 E: The repository 'http://deb.debian.org/debian bullseye-updates InRelease' is not signed.
------
webgenie_local.Dockerfile:14
--------------------
  13 |     
  14 | >>> RUN apt-get update && apt-get install wget -y \
  15 | >>>     && mkdir -p -m 755 /etc/apt/keyrings \
  16 | >>>     && wget -qO- https://cli.github.com/packages/githubcli-archive-keyring.gpg | tee /etc/apt/keyrings/githubcli-archive-keyring.gpg > /dev/null \
  17 | >>>     && chmod go+r /etc/apt/keyrings/githubcli-archive-keyring.gpg \
  18 | >>>     && echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main" | tee /etc/apt/sources.list.d/github-cli.list > /dev/null \
  19 | >>>     && apt update \
  20 | >>>     && apt install gh -y
  21 |     
--------------------
ERROR: failed to solve: process "/bin/sh -c apt-get update && apt-get install wget -y     && mkdir -p -m 755 /etc/apt/keyrings     && wget -qO- https://cli.github.com/packages/githubcli-archive-keyring.gpg | tee /etc/apt/keyrings/githubcli-archive-keyring.gpg > /dev/null     && chmod go+r /etc/apt/keyrings/githubcli-archive-keyring.gpg     && echo \"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main\" | tee /etc/apt/sources.list.d/github-cli.list > /dev/null     && apt update     && apt install gh -y" did not complete successfully: exit code: 100

View build details: docker-desktop://dashboard/build/desktop-linux/desktop-linux/lnc1cu8gin07ngddwhy2tfi57
(venv) val@Vals-MPB-14 ApiLogicServer-src % 