ine 483, in _execute_on_connection
api-logic-server-1  |     return connection._execute_clauseelement(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
api-logic-server-1  |     ret = self._execute_context(
api-logic-server-1  |           ^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
api-logic-server-1  |     return self._exec_single_context(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1987, in _exec_single_context
api-logic-server-1  |     self._handle_dbapi_exception(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2344, in _handle_dbapi_exception
api-logic-server-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
api-logic-server-1  |     self.dialect.do_execute(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
api-logic-server-1  |     cursor.execute(statement, parameters)
api-logic-server-1  | sqlalchemy.exc.ProgrammingError: (psycopg2.errors.UndefinedTable) relation "dosage" does not exist
api-logic-server-1  | LINE 1: INSERT INTO dosage (drug_id, drug_name, drug_type, min_dose,...
api-logic-server-1  |                     ^
api-logic-server-1  | 
api-logic-server-1  | [SQL: INSERT INTO dosage (drug_id, drug_name, drug_type, min_dose, max_dose, min_age, max_age, min_weight, max_weight, min_creatine, max_creatine) VALUES (%(drug_id)s, %(drug_name)s, %(drug_type)s, %(min_dose)s, %(max_dose)s, %(min_age)s, %(max_age)s, %(min_weight)s, %(max_weight)s, %(min_creatine)s, %(max_creatine)s) RETURNING dosage.id]
api-logic-server-1  | [parameters: {'drug_id': None, 'drug_name': 'd', 'drug_type': None, 'min_dose': None, 'max_dose': None, 'min_age': None, 'max_age': None, 'min_weight': None, 'max_weight': None, 'min_creatine': None, 'max_creatine': None}]
api-logic-server-1  | (Background on this error at: https://sqlalche.me/e/20/f405)
api-logic-server-1  | 
api-logic-server-1  | During handling of the above exception, another exception occurred:
api-logic-server-1  | 
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/safrs_api.py", line 674, in method_wrapper
api-logic-server-1  |     result = fun(*args, **kwargs)
api-logic-server-1  |              ^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/jsonapi.py", line 436, in post
api-logic-server-1  |     instance = self._create_instance(data)
api-logic-server-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/jsonapi.py", line 476, in _create_instance
api-logic-server-1  |     instance = self.SAFRSObject._s_post(**attributes, **relationships)
api-logic-server-1  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/base.py", line 467, in _s_post
api-logic-server-1  |     raise GenericError(str(exc))
api-logic-server-1  | safrs.errors.GenericError
api-logic-server-1  | Exception on /api/Dosage [POST]
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
api-logic-server-1  |     rv = self.dispatch_request()
api-logic-server-1  |          ^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
api-logic-server-1  |     return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful/__init__.py", line 489, in wrapper
api-logic-server-1  |     resp = resource(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful_swagger_2/__init__.py", line 39, in decorator
api-logic-server-1  |     return f(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/views.py", line 109, in view
api-logic-server-1  |     return current_app.ensure_sync(self.dispatch_request)(**kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful/__init__.py", line 604, in dispatch_request
api-logic-server-1  |     resp = meth(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 154, in decorator
api-logic-server-1  |     return current_app.ensure_sync(fn)(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful_swagger_2/swagger.py", line 219, in inner
api-logic-server-1  |     return f(self, *args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/safrs_api.py", line 708, in method_wrapper
api-logic-server-1  |     abort(status_code, errors=[errors])
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful/__init__.py", line 32, in abort
api-logic-server-1  |     original_flask_abort(http_status_code)
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/helpers.py", line 277, in abort
api-logic-server-1  |     current_app.aborter(code, *args, **kwargs)
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/werkzeug/exceptions.py", line 861, in __call__
api-logic-server-1  |     raise self.mapping[code](*args, **kwargs)
api-logic-server-1  | werkzeug.exceptions.InternalServerError: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
api-logic-server-1  | 172.20.0.1 - - [09/Feb/2025 21:34:36] "POST /api/Dosage HTTP/1.1" 500 -

 *  History restored 
v View in Docker Desktop   o View Config   w Enable Watch
(venv) val@Vals-MPB-14 medai % 
(venv) val@Vals-MPB-14 medai % 
 *  History restored 

(venv) val@Vals-MPB-14 medai % /usr/local/bin/python3.10 /Users/val/.vscode/extensions/ms-python.python-2025.1.2025020701-darwin-arm64/python_files/printEnvVariablesToFile.py /Users/val/.vscode/extensions/ms-python.python-2025.1.2025020701-darwin-arm64/python_files/deactivate/zsh/envVars.txt
(venv) val@Vals-MPB-14 medai % als create --project-name=medai --db-url=\postgresql://postgres:p@127.0.0.1:5432/medai                   
(venv) val@Vals-MPB-14 medai % sh ./devops/docker-compose-dev-local/docker-compose.sh

.. cd ./devops/docker-compose-dev-local 

/Users/val/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/medai/devops/docker-compose-dev-local

... security check complete

~/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/medai ~/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/medai/devops/docker-compose-dev-local
WARN[0000] /Users/val/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/medai/devops/docker-compose-dev-local/docker-compose-dev-local.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Running 2/0
 ✔ Container docker-compose-dev-local-api-logic-server-1  Created                                   0.0s 
 ✔ Container docker-compose-dev-local-postgres-service-1  Created                                   0.0s 
Attaching to api-logic-server-1, postgres-service-1
Gracefully stopping... (press Ctrl+C again to force)
Error response from daemon: driver failed programming external connectivity on endpoint docker-compose-dev-local-postgres-service-1 (818d16b0a715ce64f5742530fc2df1be4319c0486f03d47dff4c298ddbba0d6f): Bind for 0.0.0.0:5432 failed: port is already allocated
~/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/medai/devops/docker-compose-dev-local
(venv) val@Vals-MPB-14 medai % sh ./devops/docker-compose-dev-local/docker-compose.sh

.. cd ./devops/docker-compose-dev-local 

/Users/val/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/medai/devops/docker-compose-dev-local

... security check complete

~/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/medai ~/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/medai/devops/docker-compose-dev-local
WARN[0000] /Users/val/dev/ApiLogicServer/ApiLogicServer-dev/build_and_test/ApiLogicServer/medai/devops/docker-compose-dev-local/docker-compose-dev-local.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion 
[+] Running 2/0
 ✔ Container docker-compose-dev-local-postgres-service-1  Created                                   0.0s 
 ✔ Container docker-compose-dev-local-api-logic-server-1  Running                                   0.0s 
Attaching to api-logic-server-1, postgres-service-1
postgres-service-1  | 
postgres-service-1  | PostgreSQL Database directory appears to contain a database; Skipping initialization
postgres-service-1  | 
postgres-service-1  | 2025-02-10 04:18:41.675 UTC [1] LOG:  starting PostgreSQL 13.4 (Debian 13.4-1.pgdg100+1) on x86_64-pc-linux-gnu, compiled by gcc (Debian 8.3.0-6) 8.3.0, 64-bit
postgres-service-1  | 2025-02-10 04:18:41.678 UTC [1] LOG:  listening on IPv4 address "0.0.0.0", port 5432
postgres-service-1  | 2025-02-10 04:18:41.678 UTC [1] LOG:  listening on IPv6 address "::", port 5432
postgres-service-1  | 2025-02-10 04:18:41.679 UTC [1] LOG:  listening on Unix socket "/var/run/postgresql/.s.PGSQL.5432"
postgres-service-1  | 2025-02-10 04:18:41.695 UTC [26] LOG:  database system was shut down at 2025-02-10 04:15:14 UTC
postgres-service-1  | 2025-02-10 04:18:41.705 UTC [1] LOG:  database system is ready to accept connections
api-logic-server-1  | API Logic Server - Start Default App - redirect /admin-app/index.html
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:54] "GET / HTTP/1.1" 302 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:54] "GET /admin-app/index.html HTTP/1.1" 200 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:54] "GET /admin-app/manifest.json HTTP/1.1" 304 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:54] "GET /admin-app/static/css/main.a6dcf785.css HTTP/1.1" 304 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:54] "GET /admin-app/static/js/main.bfe80d1d.js HTTP/1.1" 304 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:54] "GET /ui/admin/admin.yaml?v=1739161554862 HTTP/1.1" 200 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:55] "GET /admin-app/index.html HTTP/1.1" 200 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:55] "GET /admin-app/manifest.json HTTP/1.1" 200 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:55] "GET /admin-app/static/js/main.bfe80d1d.js HTTP/1.1" 304 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:55] "GET /admin-app/manifest.json HTTP/1.1" 200 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:55] "GET /admin-app/static/css/main.a6dcf785.css HTTP/1.1" 304 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:55] "GET /ui/admin/admin.yaml?v=1739161555516 HTTP/1.1" 200 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:58] "GET /api/Patient?include=&page[limit]=25&page[number]=1&page[offset]=0&page[size]=25&sort=name HTTP/1.1" 401 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:58] "GET /api/Patient?include=&page[limit]=25&page[number]=1&page[offset]=0&page[size]=25&sort=-id HTTP/1.1" 401 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:58] "GET /api/Patient?include=&page[limit]=25&page[number]=1&page[offset]=0&page[size]=25&sort=name HTTP/1.1" 401 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:58] "GET /api/Patient?include=&page[limit]=25&page[number]=1&page[offset]=0&page[size]=25&sort=-id HTTP/1.1" 401 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:58] "GET /api/Patient?include=&page[limit]=25&page[number]=1&page[offset]=0&page[size]=25&sort=name HTTP/1.1" 401 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:58] "GET /api/Patient?include=&page[limit]=25&page[number]=1&page[offset]=0&page[size]=25&sort=name HTTP/1.1" 401 -
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:25:58] "GET /api/Patient?include=&page[limit]=25&page[number]=1&page[offset]=0&page[size]=25&sort=name HTTP/1.1" 401 -
api-logic-server-1  | No grants - avoid recursion on User table
api-logic-server-1  | Checking plaintext password
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:26:04] "POST /api/auth/login HTTP/1.1" 200 -
api-logic-server-1  | No grants - avoid recursion on User table
api-logic-server-1  | 
api-logic-server-1  | SQL Select -- Begin authorization processing for SELECT count(*) AS count_1 
api-logic-server-1  | FROM (SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient) AS anon_1
api-logic-server-1  | super user (e,g, sa) - no grants apply
api-logic-server-1  | No grants - avoid recursion on User table
postgres-service-1  | 2025-02-10 04:26:04.619 UTC [149] ERROR:  relation "patient" does not exist at character 345
postgres-service-1  | 2025-02-10 04:26:04.619 UTC [149] STATEMENT:  SELECT count(*) AS count_1 
postgres-service-1  |   FROM (SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
postgres-service-1  |   FROM patient) AS anon_1
api-logic-server-1  | 
api-logic-server-1  | SQL Select -- Begin authorization processing for SELECT count(*) AS count_1 
api-logic-server-1  | FROM (SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient) AS anon_1
api-logic-server-1  | super user (e,g, sa) - no grants apply
api-logic-server-1  | Can't get count for <class 'database.models.Patient'> ((psycopg2.errors.UndefinedTable) relation "patient" does not exist
api-logic-server-1  | LINE 3: FROM patient) AS anon_1
api-logic-server-1  |              ^
api-logic-server-1  | 
api-logic-server-1  | [SQL: SELECT count(*) AS count_1 
api-logic-server-1  | FROM (SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient) AS anon_1]
api-logic-server-1  | (Background on this error at: https://sqlalche.me/e/20/f405))
api-logic-server-1  | 
postgres-service-1  | 2025-02-10 04:26:04.625 UTC [149] ERROR:  current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | SQL Select -- Begin authorization processing for SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
postgres-service-1  | 2025-02-10 04:26:04.625 UTC [149] STATEMENT:  SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient ORDER BY patient.id DESC
postgres-service-1  |   FROM patient ORDER BY patient.id DESC 
api-logic-server-1  |  LIMIT :param_1 OFFSET :param_2
postgres-service-1  |    LIMIT 25 OFFSET 0
api-logic-server-1  | super user (e,g, sa) - no grants apply
api-logic-server-1  | Generic Error: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | 
api-logic-server-1  | [SQL: SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient ORDER BY patient.id DESC 
api-logic-server-1  |  LIMIT %(param_1)s OFFSET %(param_2)s]
api-logic-server-1  | [parameters: {'param_1': 25, 'param_2': 0}]
api-logic-server-1  | (Background on this error at: https://sqlalche.me/e/20/2j85)
api-logic-server-1  | Error in http://localhost:5656/api/Patient?include=&page[limit]=25&page[number]=1&page[offset]=0&page[size]=25&sort=-id
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
api-logic-server-1  |     self.dialect.do_execute(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
api-logic-server-1  |     cursor.execute(statement, parameters)
api-logic-server-1  | psycopg2.errors.InFailedSqlTransaction: current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | 
api-logic-server-1  | 
api-logic-server-1  | The above exception was the direct cause of the following exception:
api-logic-server-1  | 
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/jsonapi_formatting.py", line 201, in paginate
api-logic-server-1  |     instances = res_query.all()
api-logic-server-1  |                 ^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2692, in all
api-logic-server-1  |     return self._iter().all()  # type: ignore
api-logic-server-1  |            ^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2846, in _iter
api-logic-server-1  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
api-logic-server-1  |                                                   ^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2232, in execute
api-logic-server-1  |     return self._execute_internal(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2127, in _execute_internal
api-logic-server-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
api-logic-server-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
api-logic-server-1  |     result = conn.execute(
api-logic-server-1  |              ^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
api-logic-server-1  |     return meth(
api-logic-server-1  |            ^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
api-logic-server-1  |     return connection._execute_clauseelement(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
api-logic-server-1  |     ret = self._execute_context(
api-logic-server-1  |           ^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
api-logic-server-1  |     return self._exec_single_context(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1987, in _exec_single_context
api-logic-server-1  |     self._handle_dbapi_exception(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2344, in _handle_dbapi_exception
api-logic-server-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
api-logic-server-1  |     self.dialect.do_execute(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
api-logic-server-1  |     cursor.execute(statement, parameters)
api-logic-server-1  | sqlalchemy.exc.InternalError: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | 
api-logic-server-1  | [SQL: SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient ORDER BY patient.id DESC 
api-logic-server-1  |  LIMIT %(param_1)s OFFSET %(param_2)s]
api-logic-server-1  | [parameters: {'param_1': 25, 'param_2': 0}]
api-logic-server-1  | (Background on this error at: https://sqlalche.me/e/20/2j85)
api-logic-server-1  | 
api-logic-server-1  | 
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
api-logic-server-1  |     self.dialect.do_execute(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
api-logic-server-1  |     cursor.execute(statement, parameters)
api-logic-server-1  | psycopg2.errors.InFailedSqlTransaction: current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | 
api-logic-server-1  | 
api-logic-server-1  | The above exception was the direct cause of the following exception:
api-logic-server-1  | 
api-logic-server-1  | Traceback (most recent call last):
postgres-service-1  | 2025-02-10 04:26:04.649 UTC [151] ERROR:  relation "patient" does not exist at character 345
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/jsonapi_formatting.py", line 201, in paginate
postgres-service-1  | 2025-02-10 04:26:04.649 UTC [151] STATEMENT:  SELECT count(*) AS count_1 
api-logic-server-1  |     instances = res_query.all()
postgres-service-1  |   FROM (SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  |                 ^^^^^^^^^^^^^^^
postgres-service-1  |   FROM patient) AS anon_1
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2692, in all
api-logic-server-1  |     return self._iter().all()  # type: ignore
api-logic-server-1  |            ^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2846, in _iter
api-logic-server-1  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
api-logic-server-1  |                                                   ^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2232, in execute
api-logic-server-1  |     return self._execute_internal(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2127, in _execute_internal
api-logic-server-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
api-logic-server-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
api-logic-server-1  |     result = conn.execute(
api-logic-server-1  |              ^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
api-logic-server-1  |     return meth(
api-logic-server-1  |            ^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
api-logic-server-1  |     return connection._execute_clauseelement(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
api-logic-server-1  |     ret = self._execute_context(
api-logic-server-1  |           ^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
api-logic-server-1  |     return self._exec_single_context(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1987, in _exec_single_context
api-logic-server-1  |     self._handle_dbapi_exception(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2344, in _handle_dbapi_exception
api-logic-server-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
api-logic-server-1  |     self.dialect.do_execute(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
api-logic-server-1  |     cursor.execute(statement, parameters)
api-logic-server-1  | sqlalchemy.exc.InternalError: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | 
postgres-service-1  | 2025-02-10 04:26:04.655 UTC [151] ERROR:  current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | [SQL: SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
postgres-service-1  | 2025-02-10 04:26:04.655 UTC [151] STATEMENT:  SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient ORDER BY patient.id DESC 
postgres-service-1  |   FROM patient ORDER BY patient.name 
api-logic-server-1  |  LIMIT %(param_1)s OFFSET %(param_2)s]
postgres-service-1  |    LIMIT 25 OFFSET 0
api-logic-server-1  | [parameters: {'param_1': 25, 'param_2': 0}]
api-logic-server-1  | (Background on this error at: https://sqlalche.me/e/20/2j85)
api-logic-server-1  | 
api-logic-server-1  | During handling of the above exception, another exception occurred:
api-logic-server-1  | 
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/safrs_api.py", line 674, in method_wrapper
api-logic-server-1  |     result = fun(*args, **kwargs)
api-logic-server-1  |              ^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/jsonapi.py", line 277, in get
api-logic-server-1  |     links, data, count = paginate(instances, self.SAFRSObject)
api-logic-server-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/jsonapi_formatting.py", line 216, in paginate
api-logic-server-1  |     raise GenericError(f"{exc}")
api-logic-server-1  | safrs.errors.GenericError
api-logic-server-1  | Exception on /api/Patient [GET]
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
api-logic-server-1  |     rv = self.dispatch_request()
api-logic-server-1  |          ^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
api-logic-server-1  |     return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful/__init__.py", line 489, in wrapper
api-logic-server-1  |     resp = resource(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful_swagger_2/__init__.py", line 39, in decorator
api-logic-server-1  |     return f(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/views.py", line 109, in view
api-logic-server-1  |     return current_app.ensure_sync(self.dispatch_request)(**kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful/__init__.py", line 604, in dispatch_request
api-logic-server-1  |     resp = meth(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 154, in decorator
api-logic-server-1  |     return current_app.ensure_sync(fn)(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful_swagger_2/swagger.py", line 219, in inner
api-logic-server-1  |     return f(self, *args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/safrs_api.py", line 708, in method_wrapper
api-logic-server-1  |     abort(status_code, errors=[errors])
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful/__init__.py", line 32, in abort
api-logic-server-1  |     original_flask_abort(http_status_code)
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/helpers.py", line 277, in abort
api-logic-server-1  |     current_app.aborter(code, *args, **kwargs)
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/werkzeug/exceptions.py", line 861, in __call__
api-logic-server-1  |     raise self.mapping[code](*args, **kwargs)
api-logic-server-1  | werkzeug.exceptions.InternalServerError: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
api-logic-server-1  | Can't get count for <class 'database.models.Patient'> ((psycopg2.errors.UndefinedTable) relation "patient" does not exist
api-logic-server-1  | LINE 3: FROM patient) AS anon_1
api-logic-server-1  |              ^
api-logic-server-1  | 
api-logic-server-1  | [SQL: SELECT count(*) AS count_1 
api-logic-server-1  | FROM (SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient) AS anon_1]
api-logic-server-1  | (Background on this error at: https://sqlalche.me/e/20/f405))
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:26:04] "GET /api/Patient?include=&page[limit]=25&page[number]=1&page[offset]=0&page[size]=25&sort=-id HTTP/1.1" 500 -
api-logic-server-1  | 
api-logic-server-1  | SQL Select -- Begin authorization processing for SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient ORDER BY patient.name
api-logic-server-1  |  LIMIT :param_1 OFFSET :param_2
api-logic-server-1  | super user (e,g, sa) - no grants apply
api-logic-server-1  | Generic Error: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | 
api-logic-server-1  | [SQL: SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient ORDER BY patient.name 
api-logic-server-1  |  LIMIT %(param_1)s OFFSET %(param_2)s]
api-logic-server-1  | [parameters: {'param_1': 25, 'param_2': 0}]
api-logic-server-1  | (Background on this error at: https://sqlalche.me/e/20/2j85)
api-logic-server-1  | Error in http://localhost:5656/api/Patient?include=&page[limit]=25&page[number]=1&page[offset]=0&page[size]=25&sort=name
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
api-logic-server-1  |     self.dialect.do_execute(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
api-logic-server-1  |     cursor.execute(statement, parameters)
api-logic-server-1  | psycopg2.errors.InFailedSqlTransaction: current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | 
api-logic-server-1  | 
api-logic-server-1  | The above exception was the direct cause of the following exception:
api-logic-server-1  | 
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/jsonapi_formatting.py", line 201, in paginate
api-logic-server-1  |     instances = res_query.all()
api-logic-server-1  |                 ^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2692, in all
api-logic-server-1  |     return self._iter().all()  # type: ignore
api-logic-server-1  |            ^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2846, in _iter
api-logic-server-1  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
api-logic-server-1  |                                                   ^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2232, in execute
api-logic-server-1  |     return self._execute_internal(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2127, in _execute_internal
api-logic-server-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
api-logic-server-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
api-logic-server-1  |     result = conn.execute(
api-logic-server-1  |              ^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
api-logic-server-1  |     return meth(
api-logic-server-1  |            ^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
api-logic-server-1  |     return connection._execute_clauseelement(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
api-logic-server-1  |     ret = self._execute_context(
api-logic-server-1  |           ^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
api-logic-server-1  |     return self._exec_single_context(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1987, in _exec_single_context
api-logic-server-1  |     self._handle_dbapi_exception(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2344, in _handle_dbapi_exception
api-logic-server-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
api-logic-server-1  |     self.dialect.do_execute(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
api-logic-server-1  |     cursor.execute(statement, parameters)
api-logic-server-1  | sqlalchemy.exc.InternalError: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | 
api-logic-server-1  | [SQL: SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient ORDER BY patient.name 
api-logic-server-1  |  LIMIT %(param_1)s OFFSET %(param_2)s]
api-logic-server-1  | [parameters: {'param_1': 25, 'param_2': 0}]
api-logic-server-1  | (Background on this error at: https://sqlalche.me/e/20/2j85)
api-logic-server-1  | 
api-logic-server-1  | 
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
api-logic-server-1  |     self.dialect.do_execute(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
api-logic-server-1  |     cursor.execute(statement, parameters)
api-logic-server-1  | psycopg2.errors.InFailedSqlTransaction: current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | 
api-logic-server-1  | 
api-logic-server-1  | The above exception was the direct cause of the following exception:
api-logic-server-1  | 
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/jsonapi_formatting.py", line 201, in paginate
api-logic-server-1  |     instances = res_query.all()
api-logic-server-1  |                 ^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2692, in all
api-logic-server-1  |     return self._iter().all()  # type: ignore
api-logic-server-1  |            ^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/query.py", line 2846, in _iter
api-logic-server-1  |     result: Union[ScalarResult[_T], Result[_T]] = self.session.execute(
api-logic-server-1  |                                                   ^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2232, in execute
api-logic-server-1  |     return self._execute_internal(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/session.py", line 2127, in _execute_internal
api-logic-server-1  |     result: Result[Any] = compile_state_cls.orm_execute_statement(
api-logic-server-1  |                           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/orm/context.py", line 293, in orm_execute_statement
api-logic-server-1  |     result = conn.execute(
api-logic-server-1  |              ^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1413, in execute
api-logic-server-1  |     return meth(
api-logic-server-1  |            ^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/sql/elements.py", line 483, in _execute_on_connection
api-logic-server-1  |     return connection._execute_clauseelement(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1637, in _execute_clauseelement
api-logic-server-1  |     ret = self._execute_context(
api-logic-server-1  |           ^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1846, in _execute_context
api-logic-server-1  |     return self._exec_single_context(
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1987, in _exec_single_context
api-logic-server-1  |     self._handle_dbapi_exception(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 2344, in _handle_dbapi_exception
api-logic-server-1  |     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/base.py", line 1968, in _exec_single_context
api-logic-server-1  |     self.dialect.do_execute(
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/sqlalchemy/engine/default.py", line 920, in do_execute
api-logic-server-1  |     cursor.execute(statement, parameters)
api-logic-server-1  | sqlalchemy.exc.InternalError: (psycopg2.errors.InFailedSqlTransaction) current transaction is aborted, commands ignored until end of transaction block
api-logic-server-1  | 
api-logic-server-1  | [SQL: SELECT patient.id AS patient_id, patient.name AS patient_name, patient.birth_date AS patient_birth_date, patient.weight_kg AS patient_weight_kg, patient.creatine_mg_dl AS patient_creatine_mg_dl, patient.medical_record_number AS patient_medical_record_number, patient.created_date AS patient_created_date 
api-logic-server-1  | FROM patient ORDER BY patient.name 
api-logic-server-1  |  LIMIT %(param_1)s OFFSET %(param_2)s]
api-logic-server-1  | [parameters: {'param_1': 25, 'param_2': 0}]
api-logic-server-1  | (Background on this error at: https://sqlalche.me/e/20/2j85)
api-logic-server-1  | 
api-logic-server-1  | During handling of the above exception, another exception occurred:
api-logic-server-1  | 
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/safrs_api.py", line 674, in method_wrapper
api-logic-server-1  |     result = fun(*args, **kwargs)
api-logic-server-1  |              ^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/jsonapi.py", line 277, in get
api-logic-server-1  |     links, data, count = paginate(instances, self.SAFRSObject)
api-logic-server-1  |                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/jsonapi_formatting.py", line 216, in paginate
api-logic-server-1  |     raise GenericError(f"{exc}")
api-logic-server-1  | safrs.errors.GenericError
api-logic-server-1  | Exception on /api/Patient [GET]
api-logic-server-1  | Traceback (most recent call last):
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/app.py", line 1484, in full_dispatch_request
api-logic-server-1  |     rv = self.dispatch_request()
api-logic-server-1  |          ^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/app.py", line 1469, in dispatch_request
api-logic-server-1  |     return self.ensure_sync(self.view_functions[rule.endpoint])(**view_args)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful/__init__.py", line 489, in wrapper
api-logic-server-1  |     resp = resource(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful_swagger_2/__init__.py", line 39, in decorator
api-logic-server-1  |     return f(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/views.py", line 109, in view
api-logic-server-1  |     return current_app.ensure_sync(self.dispatch_request)(**kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful/__init__.py", line 604, in dispatch_request
api-logic-server-1  |     resp = meth(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_jwt_extended/view_decorators.py", line 154, in decorator
api-logic-server-1  |     return current_app.ensure_sync(fn)(*args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful_swagger_2/swagger.py", line 219, in inner
api-logic-server-1  |     return f(self, *args, **kwargs)
api-logic-server-1  |            ^^^^^^^^^^^^^^^^^^^^^^^^
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/safrs/safrs_api.py", line 708, in method_wrapper
api-logic-server-1  |     abort(status_code, errors=[errors])
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask_restful/__init__.py", line 32, in abort
api-logic-server-1  |     original_flask_abort(http_status_code)
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/flask/helpers.py", line 277, in abort
api-logic-server-1  |     current_app.aborter(code, *args, **kwargs)
api-logic-server-1  |   File "/usr/local/lib/python3.12/site-packages/werkzeug/exceptions.py", line 861, in __call__
api-logic-server-1  |     raise self.mapping[code](*args, **kwargs)
api-logic-server-1  | werkzeug.exceptions.InternalServerError: 500 Internal Server Error: The server encountered an internal error and was unable to complete your request. Either the server is overloaded or there is an error in the application.
api-logic-server-1  | 172.20.0.1 - - [10/Feb/2025 04:26:04] "GET /api/Patient?include=&page[limit]=25&page[number]=1&page[offset]=0&page[size]=25&sort=name HTTP/1.1" 500 -


v View in Docker Desktop   o View Config   w Enable Watch