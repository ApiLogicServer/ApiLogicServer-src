Products have Notices, with severity 0-5.

A product is orderable if there are no severity 5 Notices, and the sum of Notice severities is < 4.





Bad rule creation 
    - meant count where sev>5 -- quite wrong
    - no sums in formula


    # This rule determines if the total severity of notices for a product is correctly calculated.
    Rule.sum(derive=Product.sum_severities, as_sum_of=Notice.severity)

    # This rule checks if products with severe notices are orderable.
    Rule.formula(derive=Product.orderable, as_expression=lambda row: all(notice.severity < 5 for notice in row.notices) and row.sum_severities < 4)
